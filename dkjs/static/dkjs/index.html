<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://static.datakortet.no/font/fa470/css/font-awesome.css">

<!--START DKJS SECTION-->
    <!-- polyfills -->
    <!--IE11 needs a lot of polyfills (it's empty on all other browsers)-->
    <script src="https://polyfill.io/v3/polyfill.js?features=es5,es6,es7,Object.entries&flags=gated"></script>
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.6/webcomponents-bundle.js"></script>
    
    <!--this is only needed if you compile custom element classes to es5 (for IE11) and then try to run on a modern browser-->
    <!--this adapter MUST NOT be compiled (it also doesn't seem to be necessary..?)-->
    <!--<script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.6/custom-elements-es5-adapter.js"></script>-->
    
    <!--external-ized jquery (dk.js requires this to be available on the page)-->
    <script src="https://code.jquery.com/jquery-3.1.0.js" integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=" crossorigin="anonymous"></script>

    <!--dk.js proper/core-->
    <script DEBUG LOGLEVEL="4" crossorigin="anonymous" src="js/dk.min.js"></script>
    <!--tag lib can go here (if separate)-->
<!--END DKJS SECTION-->

    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="js/dkcss.css">
    <style>
    
        dk-icon:not(:defined) {
            display: none;
        }
        /*table, td, th { border: 1px solid #666; }*/
        /*table { border-collapse: collapse; }*/
        /*td, th { padding: 4px; }*/
    </style>
    
</head>
<body>
<div class="container">
    <h1 id="id-title">hello world</h1>
    <dk-icon style="color:hotpink" src="paw:2x:fw"></dk-icon>


    <div style="width:250px;height:200px;border:3px dotted red; margin:10px; padding:10px; border-radius: 4px">
        <div id="work"><div class="foo"></div></div>
        <div id="color-lite"></div>
    </div>
    
    <table id="dtatbl" class="table table-bordered table-striped table-hover"></table>
    
    <div id="tree1" style="margin:5px;"></div>
    <div id="tree2" style="margin:5px;"></div>
</div>
<script>
    var h1;
    dk.ready(function () {
        h1 = dk('h1');
        dk('h1').innerText = 'so long and thanks for all the fish';
        dk.on(h1, 'foo', function (a, b, c) {
            console.log("got foo'd:", a, b, c);
            dk.$(h1).append(' got foo-d');
        });
        dk.$('h1').on('click', function () {
            dk.trigger(h1, 'foo', 'with', 'some', 'args');
        });
        // dk.on(h1, 'foo', () => console.log("got foo'd"));
        console.log("STATS:", dk.stats);

        // dk.keys().forEach(k => console.log("dk." + k));
        // console.log('dk.keys():', dk.keys());

        var dt = dk.DataTable.create_on('#dtatbl', {
            datasource: dk.data.ArraySource.create({
                data: [
                    {project: 'Generelt NT', work: '1:03:57'},
                    {project: 'Tiktok',      work: '2:44:57'},
                    {project: 'FOO-support', work: '1:06:43'}
                ]
            }),
            columns: {
                project: {
                    label: 'Prosjekt'
                },
                work: {
                    label: 'Arbeid'
                }
            }
        });
        var ds = dk.tree.JSonDataSource.create({
            "depth": 2,
            "height": 2,
            "cache": {
                "d329": {
                    "kind": "department",
                    "name": "Bar3",
                    "parent": "c57",
                    "id": "d329",
                    "path": [
                        "c57", "d329"
                    ],
                    "root": "c57",
                    "children": []
                },
                "c57": {
                    "kind": "company",
                    "name": "Bar1",
                    "parent": null,
                    "id": "c57",
                    "path": [
                        "c57"
                    ],
                    "root": "c57",
                    "children": ['d329', 'd328']
                },
                "d328": {
                    "kind": "department",
                    "name": "Bar2",
                    "parent": "c57",
                    "id": "d328",
                    "path": [
                        "c57", "d328"
                    ],
                    "root": "c57",
                    "children": []
                }
            },
            "roots": ['c57']
        });
        dk.TreeWidget.create_inside('#tree1', {
            initial_collapse: false,
            data: ds
        });
        dk.tree.SelectTable.create_inside('#tree2', {
            data: ds
        })

    });
</script>
    
    <script src="./js/main.js"></script>
    <script>
        $(document).ready(function () {
            // HelloFoo.create_inside($("#work").find('.foo'), {});
            cl = ColorLight.create_inside("#color-lite");
        });
    </script>
</body>
</html>

